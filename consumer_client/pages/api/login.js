import { withSessionRoute } from "../../lib/withSession";

export default withSessionRoute(loginRoute);

async function loginRoute(req, res) {

  const body = JSON.parse(req.body);


  // get user from database then:
  req.session.user = {
    username: body.username,
    loggedIn: true
  };

  await req.session.save();

  //Return json object with two values. One for whether login was successful, and one for the username
  res.send({loggedIn: true, username: req.session.user.username});
}