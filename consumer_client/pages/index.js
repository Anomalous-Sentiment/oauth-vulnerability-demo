import Head from 'next/head'
import Image from 'next/image'
import styles from '../styles/Home.module.css'
import Form from 'react-bootstrap/Form';
import Button from 'react-bootstrap/Button';
import { useState } from 'react';
import { useRouter } from 'next/router'
import 'bootstrap/dist/css/bootstrap.min.css';

export default function Home() {
  const router = useRouter();
  const [username, setUsername] = useState('');
  const [password, setPassword] = useState('');

  function handleLogin()
  {
    const body = {'username' : username, 'password': password}
    fetch('api/login', {
      method: 'Post',
      body: JSON.stringify(body)
    })
    .then(res => {
      return res.json()
    })
    .then((json) => {
      //Check if succcessful login
      if (json['success'])
      {
        //If successful, redirect to main page
        router.push('/resources')
      }
    })
  }


  return (
    <div className={styles.container}>
      <Head>
        <title>Oauth Consumer Client</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <div className={styles.loginBox}>
        <h1>Login</h1>
        <Form.Label htmlFor="usernameInput">Username</Form.Label>
        <Form.Control
            type="text"
            id="usernameInput"
            value={username}
            onChange={(event) => setUsername(event.target.value)}
        />
        <Form.Label htmlFor="passwordInput">Password</Form.Label>
        <Form.Control
            type="password"
            id="passwordInput"
            value={password}
            onChange={(event) => setPassword(event.target.value)}
        />
        <Button
        onClick={handleLogin}>
          Login
        </Button>


      </div>
    </div>
  )
}
