# Service Provider App
This folder contains the code and files needed to run the Service provider app to issue OAUTH tokens

## Available Routes
- [http://localhost:8100](http://localhost:8100)
    - The home page of the service provider app can be found here
    - Will be redirected automatically to the login page for now
- [http://localhost:8100/login](http://localhost:8100/login)
    - The login page of the service provider. Once a user has logged in through this page, the user will be able to access apps created for the consumer to have access to the service provider's resources.
- [http://localhost:8100/dashboard](http://localhost:8100/dashboard)
    - The resources page of the service provider app can be found here. This page will show all applications user has created to allow client consumer access to their service provider's resources. The user must be logged in to access this page.
    - The user can retrieve the consumer key here to give to the client consumer.
- [http://localhost:8100/dashboard/create](http://localhost:8100/dashboard/create)
    - The OAUTH application creation page for generating the consumer_key to forumate in the request token URL for the consumer.
    - The user must be logged in to access this page
- [http://localhost:8100/oauth/request_token](http://localhost:8100/oauth/request_token)
    - The first step into obtaining authorization for the client consumer is to get a request token and token secret using the consumer key upon creation of the app.
    - The following is an example URL request token
    ```
    http://localhost:8100/oauth/request_token?oauth_consumer_key=bb4a63e74af1197811a9a51afa056113
    ```

    - The service provider returns a response following
    ```
    {"oauth_token=":"42602564021893281-4f6e3ef74b14770c","oauth_token_secret=":"f9d4e04343b44826"}
    ```

- [http://localhost:8100/oauth/authorize](http://localhost:8100/oauth/authorize)
    - After getting the Request Token, the second step is the consumer client needs to present the service provider's authorization page to the user. From which they will be asked to login using their service provider's account and grant permission access to the application
    - After the authorization is complete. If a ```oauth_callback``` is specified with the ````oauth_token```` in the authorization URL. The service provider will redirect the user back to the callback url or application

    - The following is an example authorization URL
    ```
    http://localhost:8100/oauth/authorize?oauth_token=97522688124226114-5136c8319f78f4e1
    ```
    - The user will be redirected to the login page if they aren't signed in yet
    ```
    http://localhost:8100/login?redir=//localhost:8100/oauth/authorize?oauth_token=97522688124226114-5136c8319f78f4e1
    ```
    - The user will then return back to the authorization URL which confirms whether they want to grant authorization
    - After that, the user's account will be added to the applications authorization list and will be redirected back to the dashboard since no callback URL was specified


    - The following is an example authorization URL with ```oauth_callback```
    ```
    http://localhost:8100/oauth/authorize?oauth_token=97522688124226114-5136c8319f78f4e1&oauth_callback=http://localhost:4000/oauth/callback
    ```
    - The user will be redirected to the login page if they aren't signed in yet
    ```
    http://localhost:8100/login?redir=//localhost:8100/oauth/authorize?oauth_token=97522688124226114-5136c8319f78f4e1&oauth_callback=http://localhost:4000/oauth/callback
    ```
    - The user will then return back to the authorization URL which confirms whether they want to grant authorization
    - After that, the user's account will be added to the applications authorization list and will be redirected back to the callback URL specified with the ```oauth_token```
    ```
    http://localhost:4000/oauth/callback?oauth_token=97522688124226114-5136c8319f78f4e1
    ```
